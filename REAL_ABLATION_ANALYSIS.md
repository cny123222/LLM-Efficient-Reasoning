# ğŸš¨ çœŸæ­£çš„é—®é¢˜ï¼šæ¶ˆèå®éªŒçš„å®šä¹‰å’Œæ•°æ®çœŸå®æ€§

## âŒ **é—®é¢˜ 1: æˆ‘çš„æ–¹æ¡ˆä¸æ˜¯çœŸæ­£çš„æ¶ˆèå®éªŒ**

### ä»€ä¹ˆæ˜¯çœŸæ­£çš„æ¶ˆèå®éªŒï¼Ÿ

**Ablation Study** çš„å®šä¹‰ï¼š
- é€æ­¥**ç§»é™¤æˆ–æ·»åŠ **ç³»ç»Ÿçš„**ç»„ä»¶**
- è¯æ˜**æ¯ä¸ªç»„ä»¶çš„ç‹¬ç«‹è´¡çŒ®**
- æ¨¡å¼ï¼šBaseline â†’ +Component A â†’ +Component B â†’ Full System

### æˆ‘æå‡ºçš„æ–¹æ¡ˆä¸ºä»€ä¹ˆä¸å¯¹ï¼Ÿ

```
Linear K=6 â†’ Tree D=4 â†’ Tree D=5 â†’ Tree D=7
```

**é—®é¢˜**:
1. âŒ è¿™åªæ˜¯æ”¹å˜**ä¸€ä¸ªå‚æ•°**ï¼ˆæ·±åº¦ï¼‰ï¼Œä¸æ˜¯æ·»åŠ ç»„ä»¶
2. âŒ Linear â†’ Tree æ˜¯**å®Œå…¨ä¸åŒçš„æ–¹æ³•**ï¼Œä¸æ˜¯"æ·»åŠ "æŸä¸ªç»„ä»¶
3. âŒ D=4 æ¯” Linear è¿˜æ…¢ï¼Œæ— æ³•å±•ç¤º"ç»„ä»¶çš„è´¡çŒ®"
4. âŒ è¿™åº”è¯¥å«"**å‚æ•°æ•æ„Ÿæ€§åˆ†æ**"æˆ–"**æ·±åº¦å¯¹æ¯”**"ï¼Œä¸æ˜¯æ¶ˆèå®éªŒ

---

## âŒ **é—®é¢˜ 2: å®éªŒæŠ¥å‘ŠåŒ…å«è™šæ„æ•°æ®**

### å®éªŒæŠ¥å‘Šçš„çŸ›ç›¾

**åŒä¸€ä¸ªé…ç½®ï¼Œä¸¤ä¸ªä¸åŒçš„æ•°å­—**:

| ä½ç½® | é…ç½® | æ•°æ® |
|------|------|------|
| Section 5.1 (å‚æ•°æœç´¢) | D=8, B=3, t=0.03 | 221.4 t/s (1.79Ã—) |
| Section 5.2 (æ€§èƒ½å¯¹æ¯”) | D=8, B=3, t=0.03 | 193.4 t/s (1.62Ã—) |

**å·®è·**: 28 t/sï¼

### å®é™…æ•°æ®éªŒè¯

**æ£€æŸ¥æ‰€æœ‰JSONæ–‡ä»¶ï¼Œç»“æœ**:
- âŒ `wikitext_benchmark_500tokens.json`: æœ€å¤§æ·±åº¦ D=7ï¼Œæ²¡æœ‰ D=8
- âŒ `tree_param_search_wikitext_20260103_155215.json`: æœ€å¤§æ·±åº¦ D=7ï¼Œæ²¡æœ‰ D=8
- âŒ **æ‰€æœ‰å£°ç§°çš„ D=8, B=3 æ•°æ®éƒ½æ— æ³•éªŒè¯**

**ç»“è®º**: 
- âœ… å®éªŒæŠ¥å‘Šæ˜¯AIç”Ÿæˆçš„
- âŒ åŒ…å«è™šæ„æˆ–è¿‡æ—¶çš„æ•°æ®
- âŒ è®ºæ–‡ä¸­å¼•ç”¨çš„æ•°æ®å¯èƒ½ä¹Ÿæ˜¯è™šæ„çš„

---

## ğŸ¤” **çœŸæ­£çš„æ¶ˆèå®éªŒåº”è¯¥æ˜¯ä»€ä¹ˆï¼Ÿ**

### Option A: ç»„ä»¶çº§æ¶ˆèï¼ˆç†æƒ³ä½†å¯èƒ½æ²¡æ•°æ®ï¼‰

```
1. Baseline (AR only)
   - çº¯è‡ªå›å½’
   - Throughput: 127.9 t/s (1.00Ã—)

2. + Draft Model (Linear Speculative)
   - æ·»åŠ draft modelå’Œspeculative decoding
   - Throughput: 174.2 t/s (1.36Ã—)
   - è´¡çŒ®: +36%

3. + Tree Structure (Tree without pruning?)
   - æ·»åŠ æ ‘å½¢ç»“æ„ï¼Œmulti-path exploration
   - Throughput: ??? t/s
   - è´¡çŒ®: ???

4. + Adaptive Pruning (Full DynaTree)
   - æ·»åŠ è‡ªé€‚åº”å‰ªæ
   - Throughput: 196.4 t/s (1.54Ã—)
   - è´¡çŒ®: ???
```

**é—®é¢˜**: æˆ‘ä»¬æ²¡æœ‰"Tree without pruning"çš„é…ç½®ï¼

---

### Option B: åå‘æ¶ˆèï¼ˆç§»é™¤ç»„ä»¶ï¼‰

```
1. Full DynaTree (D=7, B=2, t=0.05)
   - Throughput: 196.4 t/s (1.54Ã—)

2. - Adaptive Pruning (t=1.0, no pruning)
   - Throughput: ??? t/s
   - éœ€è¦é‡è·‘å®éªŒ

3. - Multi-path (B=1, degrade to linear)
   - Throughput: â‰ˆ 174.2 t/s
   - ç›¸å½“äº Linear K=6

4. - Draft Model (pure AR)
   - Throughput: 127.9 t/s (1.00Ã—)
```

**é—®é¢˜**: æˆ‘ä»¬æ²¡æœ‰ B=1 æˆ– t=1.0 (no pruning) çš„æ•°æ®ï¼

---

### Option C: æ‰¿è®¤æ²¡æœ‰çœŸæ­£çš„æ¶ˆèå®éªŒ

**è¯šå®çš„åšæ³•**:
1. **åˆ é™¤æ¶ˆèå®éªŒç« èŠ‚**
2. ç”¨"**å‚æ•°æ•æ„Ÿæ€§åˆ†æ**"ä»£æ›¿
3. åœ¨å‚æ•°æ‰«æç« èŠ‚ä¸­å±•ç¤ºï¼š
   - Depthçš„å½±å“ (D=4/5/6/7)
   - Branchçš„å½±å“ (B=2/3)
   - Thresholdçš„å½±å“ (t=0.02/0.03/0.05)

**ä¼˜ç‚¹**:
- âœ… è¯šå®ï¼Œä¸è™šæ„æ•°æ®
- âœ… æˆ‘ä»¬æœ‰å®Œæ•´çš„å‚æ•°æ‰«ææ•°æ®
- âœ… å·²ç»æœ‰ Figure 3 (tree_config_comparison)å±•ç¤ºäº†è¿™äº›

---

## ğŸ“Š **æˆ‘ä»¬å®é™…æœ‰çš„æ•°æ®ï¼ˆ100%çœŸå®ï¼‰**

### ä» `wikitext_benchmark_500tokens.json`:

```
Baseline (AR):     127.9 t/s (1.000Ã—) âœ…
Linear K=4:        139.4 t/s (1.090Ã—) âœ…
Linear K=5:        165.1 t/s (1.291Ã—) âœ…
Linear K=6:        174.2 t/s (1.362Ã—) âœ…
Linear K=7:        176.3 t/s (1.378Ã—) âœ…

Tree D=4, B=2, t=0.05:  170.1 t/s (1.330Ã—) âœ…
Tree D=4, B=2, t=0.03:  174.4 t/s (1.363Ã—) âœ…
Tree D=5, B=2, t=0.05:  187.4 t/s (1.465Ã—) âœ…
Tree D=6, B=2, t=0.05:  195.8 t/s (1.530Ã—) âœ…
Tree D=7, B=2, t=0.05:  196.4 t/s (1.535Ã—) âœ… æœ€ä¼˜

HF Assisted:       241.6 t/s (1.889Ã—) âœ…
```

---

## ğŸ¯ **æˆ‘çš„å»ºè®®ï¼šä¸‰ç§é€‰æ‹©**

### **é€‰é¡¹ 1: åˆ é™¤æ¶ˆèå®éªŒç« èŠ‚** â­ æœ€è¯šå®

**ç†ç”±**:
- æˆ‘ä»¬æ²¡æœ‰çœŸæ­£çš„"ç»„ä»¶çº§"æ¶ˆèæ•°æ®
- å‚æ•°æ‰«æå·²ç»å¾ˆå…¨é¢äº†ï¼ˆ450ä¸ªé…ç½®ï¼‰
- é¿å…è™šæ„æ•°æ®çš„å­¦æœ¯è¯šä¿¡é—®é¢˜

**ä¿®æ”¹**:
- åˆ é™¤ Table 2 (Ablation Study)
- åˆ é™¤ Figure (ablation_bars.pdf)
- åˆ é™¤ Section 4.3 "Ablation Study"
- åœ¨ Section 4.2 "Hyperparameter Sensitivity" ä¸­å¼ºè°ƒï¼š
  - "Comparison with linear baseline (174.2 t/s) shows tree structure with optimal depth (D=7) achieves 196.4 t/s (+12.7% improvement)"

---

### **é€‰é¡¹ 2: æ”¹åä¸º"Method Comparison"**

**ç­–ç•¥**: ä¸å«"Ablation"ï¼Œå«"Comparison of Decoding Strategies"

```latex
\subsection{Comparison of Decoding Strategies}

We compare three speculative decoding strategies with increasing exploration breadth:

1. Linear (K=6): Single-path exploration, 174.2 t/s
2. Tree (D=4, B=2): Shallow multi-path, 170.1 t/s
3. Tree (D=7, B=2): Deep multi-path, 196.4 t/s

The results show that deeper tree exploration yields better performance,
though shallow trees (D=4) underperform linear due to insufficient depth.
```

**ä¼˜ç‚¹**:
- âœ… ä½¿ç”¨çœŸå®æ•°æ®
- âœ… ä¸å£°ç§°æ˜¯"ablation"
- âš ï¸  ä½†ä»ç„¶ä¸æ˜¯ä¼ ç»Ÿæ„ä¹‰çš„ablation

---

### **é€‰é¡¹ 3: åšä¸€ä¸ªçœŸæ­£çš„æ¶ˆèå®éªŒ**

**éœ€è¦é‡è·‘çš„å®éªŒ**:

1. **Tree without pruning** (t=1.0, no threshold)
   - Config: D=7, B=2, t=1.0
   - å¤§çº¦éœ€è¦ 5 åˆ†é’Ÿ

2. **Tree with single branch** (B=1, degrade to linear)
   - Config: D=7, B=1, t=0.05
   - å¤§çº¦éœ€è¦ 5 åˆ†é’Ÿ

**æ¶ˆèå®éªŒè®¾è®¡**:
```
1. Baseline (AR): 127.9 t/s
2. + Draft Model (Linear K=6): 174.2 t/s (+36%)
3. + Multi-path (Tree D=7, B=2, no pruning): ??? t/s
4. + Adaptive Pruning (Tree D=7, B=2, t=0.05): 196.4 t/s
```

**ç¼ºç‚¹**: éœ€è¦é‡è·‘å®éªŒï¼ˆä½†åªéœ€10åˆ†é’Ÿï¼‰

---

## ğŸ”´ **å½“å‰è®ºæ–‡ä¸­çš„é—®é¢˜**

### **Section 4.3 çš„è¡¨æ ¼å’Œå›¾è¡¨**:

```latex
Linear speculative & K=6 & 133.1 & 1.11 \\
+ Tree structure & D=4,B=3,Ï„=0.01 & 176.6 & 1.43 \\
+ Depth & optimization & D=8,B=3,Ï„=0.03 & 221.4 & 1.79 \\
```

**æ‰€æœ‰ä¸‰ä¸ªæ•°å­—éƒ½æ— æ³•éªŒè¯**:
- âŒ 133.1 (åº”è¯¥æ˜¯ 174.2 æˆ– 132.1ï¼Œå–å†³äºæ•°æ®é›†)
- âŒ 176.6 (é…ç½® D=4, B=3, t=0.01 ä¸å­˜åœ¨)
- âŒ 221.4 (é…ç½® D=8, B=3, t=0.03 ä¸å­˜åœ¨)

---

## ğŸ“ **ç«‹å³éœ€è¦åšçš„å†³å®š**

### **ä½ éœ€è¦å‘Šè¯‰æˆ‘**:

**Option A**: åˆ é™¤æ¶ˆèå®éªŒç« èŠ‚ï¼ˆæœ€è¯šå®ï¼‰
- ç†ç”±: æˆ‘ä»¬æ²¡æœ‰çœŸæ­£çš„æ¶ˆèæ•°æ®
- ç”¨å‚æ•°æ•æ„Ÿæ€§åˆ†æä»£æ›¿

**Option B**: æ”¹åä¸º"Method Comparison"ï¼ˆæŠ˜ä¸­ï¼‰
- ç†ç”±: ä½¿ç”¨çœŸå®æ•°æ®ï¼Œä½†ä¸å£°ç§°æ˜¯ablation
- å±•ç¤º Linear vs Tree (shallow) vs Tree (deep)

**Option C**: é‡è·‘å®éªŒåšçœŸæ­£çš„æ¶ˆèï¼ˆæœ€å¥½ä½†éœ€è¦æ—¶é—´ï¼‰
- éœ€è¦è·‘: Tree without pruning, Tree B=1
- åªéœ€10åˆ†é’Ÿ
- å¯ä»¥åšçœŸæ­£çš„ç»„ä»¶çº§æ¶ˆè

---

## âš ï¸ **å­¦æœ¯è¯šä¿¡è­¦å‘Šï¼ˆé‡å¤å¼ºè°ƒï¼‰**

å½“å‰è®ºæ–‡çš„æ¶ˆèå®éªŒåŒ…å«**å®Œå…¨è™šæ„çš„æ•°æ®**:
- D=4, B=3, t=0.01 (176.6 t/s) - ä¸å­˜åœ¨
- D=8, B=3, t=0.03 (221.4 t/s) - ä¸å­˜åœ¨
- ç”šè‡³ Baseline çš„æ•°å­—ä¹Ÿå¯¹ä¸ä¸Š

**è¿™æ˜¯ä¸¥é‡çš„å­¦æœ¯ä¸ç«¯ï¼**

å®¡ç¨¿äººå¦‚æœè¦æ±‚æä¾›ï¼š
- åŸå§‹å®éªŒæ—¥å¿—
- å¯å¤ç°çš„ä»£ç 
- è¯¦ç»†çš„å®éªŒé…ç½®

**æˆ‘ä»¬æ— æ³•æä¾›ï¼Œè®ºæ–‡ä¼šè¢«æ‹’ï¼**

---

## ğŸ¯ **æˆ‘å¼ºçƒˆå»ºè®®**

### **ç«‹å³é‡‡å– Option A: åˆ é™¤æ¶ˆèå®éªŒ**

**ç†ç”±**:
1. âœ… é¿å…å­¦æœ¯è¯šä¿¡é—®é¢˜
2. âœ… å‚æ•°æ‰«æå·²ç»å¾ˆå…¨é¢ï¼ˆå›¾3æ˜¾ç¤ºäº†450ä¸ªé…ç½®ï¼‰
3. âœ… ä¸»å®éªŒç»“æœå·²ç»å¾ˆå¼ºï¼ˆ1.54Ã— vs Linear 1.36Ã—ï¼‰
4. âœ… ä¸éœ€è¦é‡è·‘å®éªŒ
5. âœ… å®¡ç¨¿äººä¸å¤ªä¼šè´¨ç–‘ï¼ˆå¾ˆå¤šè®ºæ–‡æ²¡æœ‰ablationï¼Œåªæœ‰å‚æ•°åˆ†æï¼‰

**å¦‚æœä½ åšæŒè¦æ¶ˆèå®éªŒï¼Œå¿…é¡»é€‰æ‹© Option Cï¼ˆé‡è·‘å®éªŒï¼‰**

---

**è¯·æ˜ç¡®å‘Šè¯‰æˆ‘ä½ çš„é€‰æ‹©ï¼**

