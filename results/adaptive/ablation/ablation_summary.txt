================================================================================
                    自适应树结构消融实验结果汇总
================================================================================

实验配置: WikiText-2 | Pythia-2.8B + Pythia-70m | 10 samples | 500 tokens

================================================================================
                          PART 1: 基准对比
================================================================================

┌─────────────────────────┬──────────────┬──────────┬───────────┬───────────┐
│ 方法                    │ 吞吐量(t/s)  │ Speedup  │ Accept%   │ PathLen   │
├─────────────────────────┼──────────────┼──────────┼───────────┼───────────┤
│ Baseline (AR)           │ 132.7 ± 0.9  │ 1.00×    │ -         │ -         │
└─────────────────────────┴──────────────┴──────────┴───────────┴───────────┘

================================================================================
                    PART 2: Fixed Tree 对照组
================================================================================

┌──────────────┬──────────────┬──────────┬───────────┬───────────┬────────┐
│ Depth        │ 吞吐量(t/s)  │ Speedup  │ Accept%   │ PathLen   │ Rounds │
├──────────────┼──────────────┼──────────┼───────────┼───────────┼────────┤
│ D=4, B=2     │ 145.1 ± 37.9 │ 1.09×    │ 77.7%     │ 4.66      │ 108    │
│ D=5, B=2     │ 177.0 ± 21.4 │ 1.33×    │ 73.8%     │ 5.17      │ 98     │
│ D=6, B=2     │ 183.3 ± 25.0 │ 1.38×    │ 69.5%     │ 5.56      │ 91     │ ← 最佳
│ D=7, B=2     │ 182.7 ± 30.8 │ 1.38×    │ 64.5%     │ 5.81      │ 89     │
└──────────────┴──────────────┴──────────┴───────────┴───────────┴────────┘

观察: 随深度增加，吞吐量先升后平，接受率持续下降。D=6 是最佳平衡点。

================================================================================
                 PART 3: Adaptive 实验组 (base_depth=4)
================================================================================

对照: Fixed Tree D=4 (145.1 t/s, Accept=77.7%)

┌────────────────────────────┬──────────────┬──────────┬───────────┬───────────┬────────┐
│ Phase                      │ 吞吐量(t/s)  │ Speedup  │ Accept%   │ PathLen   │ Δ吞吐  │
├────────────────────────────┼──────────────┼──────────┼───────────┼───────────┼────────┤
│ Phase 1: Adaptive Branch   │ 167.4 ± 20.7 │ 1.26×    │ 77.1%     │ 4.62      │ +15.4% │
│ Phase 2: + Dynamic Depth   │ 185.3 ± 34.8 │ 1.40×    │ 87.0%     │ 5.22      │ +10.7% │
│ Phase 3: + History Adjust  │ 189.4 ± 34.4 │ 1.43×    │ 92.3%     │ 5.54      │ +2.2%  │
└────────────────────────────┴──────────────┴──────────┴───────────┴───────────┴────────┘

★ 总提升: +30.5% vs Fixed Tree D=4 | 接受率: +14.6pp

================================================================================
                 PART 4: Adaptive 实验组 (base_depth=5)
================================================================================

对照: Fixed Tree D=5 (177.0 t/s, Accept=73.8%)

┌────────────────────────────┬──────────────┬──────────┬───────────┬───────────┬────────┐
│ Phase                      │ 吞吐量(t/s)  │ Speedup  │ Accept%   │ PathLen   │ Δ吞吐  │
├────────────────────────────┼──────────────┼──────────┼───────────┼───────────┼────────┤
│ Phase 1: Adaptive Branch   │ 174.0 ± 26.0 │ 1.31×    │ 72.9%     │ 5.10      │ -1.7%  │
│ Phase 2: + Dynamic Depth   │ 183.5 ± 34.2 │ 1.38×    │ 75.9%     │ 5.31      │ +5.5%  │
│ Phase 3: + History Adjust  │ 187.2 ± 35.1 │ 1.41×    │ 80.3%     │ 5.62      │ +2.0%  │
└────────────────────────────┴──────────────┴──────────┴───────────┴───────────┴────────┘

★ 总提升: +5.8% vs Fixed Tree D=5 | 接受率: +6.5pp

================================================================================
                 PART 5: Adaptive 实验组 (base_depth=6)
================================================================================

对照: Fixed Tree D=6 (183.3 t/s, Accept=69.5%)

┌────────────────────────────┬──────────────┬──────────┬───────────┬───────────┬────────┐
│ Phase                      │ 吞吐量(t/s)  │ Speedup  │ Accept%   │ PathLen   │ Δ吞吐  │
├────────────────────────────┼──────────────┼──────────┼───────────┼───────────┼────────┤
│ Phase 1: Adaptive Branch   │ 176.9 ± 28.3 │ 1.33×    │ 68.9%     │ 5.51      │ -3.5%  │
│ Phase 2: + Dynamic Depth   │ 191.3 ± 36.8 │ 1.44×    │ 72.2%     │ 5.78      │ +8.1%  │
│ Phase 3: + History Adjust  │ 192.3 ± 36.1 │ 1.45×    │ 74.2%     │ 5.94      │ +0.5%  │
└────────────────────────────┴──────────────┴──────────┴───────────┴───────────┴────────┘

★ 总提升: +4.9% vs Fixed Tree D=6 | 接受率: +4.7pp

================================================================================
                         PART 6: 关键结论
================================================================================

1. 最佳吞吐量: Adaptive Phase 3 (D=6) = 192.3 t/s (1.45× vs Baseline)

2. 最高接受率: Adaptive Phase 3 (D=4) = 92.3%

3. 各 Phase 贡献:
   ┌─────────────┬──────────────────────────────────────────────────────────┐
   │ Phase       │ 机制                                                     │
   ├─────────────┼──────────────────────────────────────────────────────────┤
   │ Phase 1     │ 自适应分支 - 高置信度少分支，低置信度多分支             │
   │ Phase 2     │ 动态深度 - 早停低置信分支，深扩高置信分支 (贡献最大)    │
   │ Phase 3     │ 历史调整 - 根据历史接受率自动调整参数                   │
   └─────────────┴──────────────────────────────────────────────────────────┘

4. 浅层树优势更大:
   - D=4: Adaptive 提升 30.5%
   - D=6: Adaptive 提升 4.9%
   
   原因: 浅层树固定结构限制更明显，自适应可以动态扩展高置信分支突破限制

5. Speedup 计算修复说明:
   原始输出 Speedup=1.00 是 bug，已修复。
   正确公式: Speedup = throughput / baseline_throughput

================================================================================


